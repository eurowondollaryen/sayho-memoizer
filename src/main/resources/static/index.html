 <!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Memoizer</title>
		<script src="./js/jquery.min.js"></script>
		<link rel="stylesheet" href="./css/bootstrap/bootstrap.min.css">
		<script src="./js/bootstrap/bootstrap.min.js"></script>
		<script src="./js/sayho/sayho-request.js"></script>
		<!-- custom style -->
		<link rel="stylesheet" href="./css/style_sayho.css">
		<style>
			.sayho-footer {
				position: fixed;
				left: 0;
				bottom: 0;
				width : 100%;
				text-align: center;
				padding: 15px;
			}
			.sayho-updown {
				padding-top: 20px;
				padding-bottom: 20px;
			}
			.sayho-updown-1 {
				padding-top: 10px;
				padding-bottom: 10px;
			}
			h4 {
				font-weight: bold;
			}
		</style>
		<script>
		/* TEST START */
		var alertContents = function() {
			if(this.readyState === XMLHttpRequest.DONE) {
				if(this.status === 200) {
					alert(this.responseText);
				} else {
					alert('wrong request');
				}
			}
		};
		
		var makeRequest = function() {
			httpRequest = new XMLHttpRequest();
			if(!httpRequest) {
				alert('cannot find XMLHTTP instance');
				return false;
			}
			httpRequest.onreadystatechange = alertContents(httpRequest);
			httpRequest.open('POST', '/main', true);
			httpRequest.send({'test':'hello'});
		};
		/* TEST END */
		
		//Quiz 추가 modal 출력
		const showAdd = function() {
			document.getElementById("inpTitle").value = "";
			$("#inpTitleModal").modal();
		};
		
		//request한 quiz의 결과 리스트를 출력하는 기능
		//quizList - quiz object list
		const printQuizList = function(quizList) {
			var quizListArea = document.getElementById("quizListArea");
			quizListArea.innerHTML = "";
			for(var i = 0; i < quizList.length; ++i) {
				var addElem = document.createElement("DIV");
				addElem.setAttribute("class", "card shadow");
				var addElem1 = document.createElement("DIV");
				addElem1.setAttribute("class", "container sayho-updown");
				addElem1.innerHTML = "<h3><strong>" + quizList[i]["quiz_nm"] + "</strong></h3>"
				+ "<p>- " + "? 건의 질문" + "</p>"
				+ "<button class='btn btn-primary' onClick='addQuestion(" + i + ")'>질문 추가하기</button>"
				+ "<button class='btn btn-primary' onClick='startQuiz(" + i + ")'>퀴즈 풀기</button>"
				+ "<button class='btn btn-danger' onClick='deleteQuiz(" + i + ")'>퀴즈 삭제</button>";
				addElem.appendChild(addElem1);
				quizListArea.appendChild(addElem);
			}
		};
		
		//Quiz에 대한 질문 추가 modal 출력
		const addQuestion = function(index) {
			document.getElementById("inpQuestion").value = "";
			document.getElementById("inpAnswer").value = "";
			document.getElementById("modalQuestionTitle").innerHTML = "질문 추가하기 - " + global_quiz_list[index]["quiz_nm"];
			$("#inpQuestionModal").modal();
		};
		
		//regist questions for a quiz
		const registQuestion = function() {
			var inpQuestion = document.getElementById("inpQuestion").value;
			var inpAnswer = document.getElementById("inpAnswer").value;
		}
		const startQuiz = function(seq) {
			//TODO : 퀴즈 풀기 기능 시작
			
		};
		
		document.addEventListener("DOMContentLoaded", function() {
			requestQuizList(global_quiz_list);
		});
		</script>
	</head>
	<body>
		<nav class="navbar navbar-expand-sm bg-primary navbar-dark">
		  <ul class="navbar-nav">
		    <li class="nav-item active">
		      <a class="nav-link" href="#"><strong>Memoizer</strong></a>
		    </li>
		  </ul>
		</nav>
		<div class="container sayho-updown">
			<div class="card shadow">
				<!-- calendar area -->
				<div class="container sayho-updown">
					<h3><strong>암기하기</strong></h3>
					<p>암기할 질문/답 리스트를 저장하여, 무작위 퀴즈를 만듭니다.</p>
					<button class="btn btn-primary" onClick="showAdd()">퀴즈 생성하기</button>
				</div>
			</div>
		</div>
		<div class="container sayho-updown" id="quizListArea">
		</div>
		<div class="sayho-footer bg-primary text-white">
			<p>Copyright &copy; 2020 <a href="https://github.com/eurowondollaryen" style="color:white" target="_blank">eurowondollaryen</a>.</p>
		</div>
		<!-- title input Modal -->
		<div class="modal fade" id="inpTitleModal">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">퀴즈 생성하기</h4>
						<button type="button" class="close" data-dismiss="modal">×</button>
					</div>
					
					<div class="modal-body">
						<div class="container">
							<div class="row">
								<label for="inpTitle">제목</label>
								<input class="form-control" type="text" placeholder="퀴즈의 제목을 입력하세요." id="inpTitle"/>
							</div>
							<div class="row" id="questionArea">
							</div>
						</div>
					</div>
			        
			        <div class="modal-footer">
			        	<button type="button" class="btn btn-primary" onClick="registQuiz()" data-dismiss="modal">퀴즈 생성하기</button>
			         	<button type="button" class="btn btn-danger" data-dismiss="modal">닫기</button>
			        </div>
				</div>
			</div>
		</div>
		
		<!-- question input Modal -->
		<div class="modal fade" id="inpQuestionModal">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title" id="modalQuestionTitle">질문 추가하기</h4>
						<button type="button" class="close" data-dismiss="modal">×</button>
					</div>
					
					<div class="modal-body">
						<div class="container">
							<div class="row">
								<label for="inpQuestion">질문</label>
								<textarea class="form-control" placeholder="질문을 입력하세요." id="inpQuestion">
								</textarea>
							</div>
							<div class="row">
								<label for="inpAnswer">답변</label>
								<textarea class="form-control" placeholder="답변을 입력하세요." id="inpAnswer">
								</textarea>
							</div>
							<div class="row">
								<label for="inpFile">[미완성]파일로 질문/답변 추가하기</label>
								<!-- TODO : file input -->
							</div>
						</div>
					</div>
			        
			        <div class="modal-footer">
			        	<button type="button" class="btn btn-primary" onClick="registQuestion()" data-dismiss="modal">질문 등록하기</button>
			         	<button type="button" class="btn btn-danger" data-dismiss="modal">닫기</button>
			        </div>
				</div>
			</div>
		</div>
		
	</body>
</html>