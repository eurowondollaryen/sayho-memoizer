 <!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Memoizer</title>
		<script src="./js/jquery.min.js"></script>
		<link rel="stylesheet" href="./css/bootstrap/bootstrap.min.css">
		<script src="./js/bootstrap/bootstrap.min.js"></script>
		<!-- custom style -->
		<link rel="stylesheet" href="./css/style_sayho.css">
		<style>
			.sayho-footer {
				position: fixed;
				left: 0;
				bottom: 0;
				width : 100%;
				text-align: center;
				padding: 15px;
			}
			.sayho-updown {
				padding-top: 20px;
				padding-bottom: 20px;
			}
			.sayho-updown-1 {
				padding-top: 10px;
				padding-bottom: 10px;
			}
			h4 {
				font-weight: bold;
			}
		</style>
		<script>
		var alertContents = function() {
			if(this.readyState === XMLHttpRequest.DONE) {
				if(this.status === 200) {
					alert(this.responseText);
				} else {
					alert('wrong request');
				}
			}
		};
		
		var makeRequest = function() {
			httpRequest = new XMLHttpRequest();
			if(!httpRequest) {
				alert('cannot find XMLHTTP instance');
				return false;
			}
			httpRequest.onreadystatechange = alertContents(httpRequest);
			httpRequest.open('POST', '/main', true);
			httpRequest.send({'test':'hello'});
		};
		var showAdd = function() {
			document.getElementById("inpTitle").value = "";
			$("#myModal").modal();
		};
		var register = function() {
			if(document.getElementById("inpTitle").value === "") {
				alert("제목을 입력해 주세요!");
			} else {
				$.ajax({
					type: "post",
					url: "/quiz/regist",
					data: requestData,
					success: function(result) {
						console.log('requesting workout record success!');
						console.log(result);
						global_workout_data = result.data;
						for(var i = 0; i < global_workout_data.length; ++i) {
							var targetCell = document.getElementById("cell" + global_workout_data[i]["wo_dt"]);
							var wrElem = document.createElement("DIV");
							wrElem.setAttribute("id", "wr" + i);
							wrElem.classList.add("workout-record");
							wrElem.setAttribute("onClick", "showWorkoutRecord(" + i + ")");
							wrElem.innerHTML = global_workout_data[i]["part_main_nm"] + "-" + global_workout_data[i]["wo_nm_kor"];
							targetCell.appendChild(wrElem);
						}
					},
					error : function(xhr, textStatus, errorThrown) {
						alert("운동 기록을 가져오는 데 실패했습니다..\n" + xhr.status + " " + xhr.statusText);
					}
				});
			}
		}
		var addQuestionInput = function() {
			
		}
		document.addEventListener("DOMContentLoaded", function() {
			$.ajax({
				type: "post",
				url: "/quiz/list",
				data: {"usrId" : "sehoakasayho"},
				success: function(result) {
					console.log('request success');
					console.log(result);
				},
				error : function(xhr, textStatus, errorThrown) {
					alert("request failed...\n" + xhr.status + " " + xhr.statusText);
				}
			});
		});
		</script>
	</head>
	<body>
		<nav class="navbar navbar-expand-sm bg-primary navbar-dark">
		  <ul class="navbar-nav">
		    <li class="nav-item active">
		      <a class="nav-link" href="#"><strong>Memoizer</strong></a>
		    </li>
		  </ul>
		</nav>
		<div class="container sayho-updown">
			<div class="card shadow">
				<!-- calendar area -->
				<div class="container sayho-updown">
					<h3><strong>암기하기</strong></h3>
					<p>암기할 질문/답 리스트를 저장하여, 무작위 퀴즈를 만듭니다.</p>
					<button class="btn btn-primary" onClick="showAdd()">퀴즈 생성하기</button>
				</div>
			</div>
		</div>
		<div id="quizlist">
		</div>
		<div class="sayho-footer bg-primary text-white">
			<p>Copyright &copy; 2020 <a href="https://github.com/eurowondollaryen" style="color:white" target="_blank">eurowondollaryen</a>.</p>
		</div>
		<!-- The Modal -->
		<div class="modal fade" id="myModal">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">퀴즈 생성하기</h4>
						<button type="button" class="close" data-dismiss="modal">×</button>
					</div>
					
					<div class="modal-body">
						<div class="container">
							<div class="row">
								<label for="inpTitle">제목</label>
								<input class="form-control" type="text" placeholder="퀴즈의 제목을 입력하세요." id="inpTitle"/>
							</div>
							<div class="row" id="questionArea">
							</div>
						</div>
					</div>
			        
			        <div class="modal-footer">
			        	<button type="button" class="btn btn-primary" onClick="register()" data-dismiss="modal">등록</button>
			         	<button type="button" class="btn btn-danger" data-dismiss="modal">닫기</button>
			        </div>
				</div>
			</div>
		</div>
		
	</body>
</html>